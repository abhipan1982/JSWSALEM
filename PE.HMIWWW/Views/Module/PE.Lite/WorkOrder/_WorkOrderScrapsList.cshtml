@using PE.HMIWWW.ViewModel.Module.Lite.Material
@model long?
@(Html.Kendo().Grid<VM_RawMaterialOverview>()
  .Name("ScrapList")
  .NoRecords(n => n.Template(VM_Resources.GLOB_GRID_NO_DATA))
  .Pageable(p => p
      .Messages(m => m.Display(VM_Resources.GLOB_pagination)))
  .HtmlAttributes(new {style = "height: 100%;"})
  .Filterable()
  .Sortable()
  .Columns(c =>
  {
    c.Bound(x => x.RawMaterialId).Visible(false);
    c.Bound(x => x.RawMaterialName);
    c.Bound(x => x.ScrapRemarks);
    c.Bound(x => x.ScrapPercent);
    c.ForeignKey(o => o.EnumTypeOfScrap, (SelectList)ViewBag.TypeOfScrap);
    c.Bound(p => p.RawMaterialId).Sortable(false).Groupable(false).Filterable(false).Title(" ").Width(30)
      .ClientTemplate(@Html.ImageButton("edit", "_Scrap.ScrapPopup(#:RawMaterialId#, () => { _Scrap_WorkOrder.refreshScraps(" + Model + ")})").ToString());

  })
  .DataSource(d => d
      .Ajax()
      .ServerOperation(true)
      .PageSize(23)
      .Read(r => r.Action("GetWorkOrderScrapsList", "WorkOrder", new {workOrderId = Model}))
  )
)
