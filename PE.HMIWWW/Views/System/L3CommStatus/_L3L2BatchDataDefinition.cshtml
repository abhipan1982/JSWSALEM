@using PE.HMIWWW.ViewModel.System;


<script type="text/javascript">
    function onDataBound() {
        var grid = this;
        grid.tbody.find('>tr').each(function () {
            var dataItem = grid.dataItem(this);
            if (dataItem.CommStatusError) {
                $(this).addClass('bg-danger text-light');
            }
        })
    }
</script>

@(
Html.Kendo().Grid<VM_L3L2BatchDataDefinition>()
        .Name("L3TransferTableBatchDataDefinition")
        .NoRecords(x => x.Template(VM_Resources.GLOB_GRID_NO_DATA))
        .Scrollable()
        .Sortable()
        .Filterable()
        .Pageable(p => p
            .Messages(m => m.Display(VM_Resources.GLOB_pagination)))
        .HtmlAttributes(new { style = @String.Format("height:{0}px;", ((int)ViewBag.FullGridHeight) - 50) })
        .Columns(c =>
        {
            //c.Bound(x => x.Counter).Visible(false);
            c.ForeignKey(o => o.CommStatus, (SelectList)ViewBag.CommStatusList);
            c.Bound(x => x.BATCH_NO);
            //c.Bound(x => x.BLOOMS_IN_BUNDLE);
            @*c.Bound(x => x.PO_NO);
            c.Bound(x => x.CreatedTs).Filterable(f => f.UI(GridFilterUIRole.DateTimePicker)).Format(VM_Resources.ResourceManager.GetString("GLOB_LongDateTime_FORMAT")).HtmlAttributes(new { @class = "nowrap" });
            c.Bound(x => x.UpdatedTs).Filterable(f => f.UI(GridFilterUIRole.DateTimePicker)).Format(VM_Resources.ResourceManager.GetString("GLOB_LongDateTime_FORMAT")).HtmlAttributes(new { @class = "nowrap" });
            c.Bound(p => p.CommStatus).Filterable(false).Sortable(x => x.AllowUnsort(false)).Width(70).Title(" ").ClientTemplate(
              "# if (CommStatusError) { #" +
                  Html.ImageButton("details", "GoToProductReportDetails(#:Counter#)") +
                  Html.ImageButton("reset", "ResetCoilReport(#=Counter#)", false) +
              "# } else { #" +
                  Html.ImageButton("details", "GoToProductReportDetails(#:Counter#)") +
              "# } #"
            );*@
        })
        .Events(events => events.DataBound("onDataBound"))
        .DataSource(d => d
            .Ajax()
            .ServerOperation(true)
            .PageSize(((int)ViewBag.NoRecordsInGrid))
            .PageSize(26)
            .Read(r => r.Action("GetL3L2BatchDataDefinitionList", "L3CommStatus"))
            )
)
